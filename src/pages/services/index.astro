---
import ConactSection from '~/components/HomePage/ConactSection.astro';
import Hero from '~/components/widgets/Hero.astro';
import ServicesAll from '~/components/widgets/ServicesAll.astro';
import Layout from '~/layouts/PageLayout.astro';
import { BASE_URL } from '~/utils/apliInstance';

/* =====================
   SEO Metadata
===================== */
const metadata = {
  title: 'Our Services â€“ Expert Stairlift Solutions',
  description:
    'Explore our range of stairlift services, including home assessments, installation, and safety evaluations to ensure safe and comfortable mobility at home.',
};

/* =====================
   Fallback Data
===================== */
const fallbackData = {
  heading: 'Our Services',
  sub_heading:
    'Expert stairlift services to support safe and comfortable movement at home.',
  hero_bg_image:
    'https://images.unsplash.com/photo-1519389950473-47ba0277781c?auto=format&fit=crop&w=1740&q=80',
};

/* =====================
   Page Data
===================== */
let pageData = fallbackData;
 let AllserviceData = [];
try {
  const res = await fetch(`${BASE_URL}/items/Service_Page`);
  const resAllservice = await fetch(`${BASE_URL}/items/Services`);

   

  if (res.ok) {
    const apiData = await res.json();
    const apiDataService= await resAllservice.json();
 
    AllserviceData = apiDataService?.data ?? [];
    pageData = apiData?.data?.[0] ?? fallbackData;
  }
} catch (error) {
  console.warn('Directus API failed, using fallback data');
}
---

<Layout metadata={metadata} headerText="">
  <!-- =====================
       Hero Section
  ====================== -->
  <Hero
    tagline={pageData.heading}
    title={pageData.heading}
    subtitle={pageData.sub_heading}
    actions={[
      {
        variant: 'primary',
        text: 'Start Exploring',
        href: '/',
      },
    ]}
    image={{
      src: pageData.hero_bg_image,
      alt: 'Home Stairlift Services',
    }}
  />

  <!-- =====================
       What We Offer
  ====================== -->
  <section class="max-w-7xl mx-auto px-4 py-12">
    <h2 class="text-4xl font-bold text-secondary mb-7">
      What We Offer
    </h2>
    <ServicesAll data={AllserviceData} />
  </section>

  <!-- =====================
       Contact Section
  ====================== -->
  <ConactSection />
</Layout>
