---
import Layout from '~/layouts/PageLayout.astro';
import '~/styles/global.css';
import defultogimag from '~/assets/images/default.png';
import HeroSection from '~/components/HomePage/Herosection.astro';
import AboutSection from '~/components/HomePage/AboutSection.astro';
import OurServices from '~/components/HomePage/OurServices.astro';
import WhyusSection from '~/components/HomePage/WhyusSection.astro';

import ConactSection from '~/components/HomePage/ConactSection.astro';
import Testimonial from '~/components/HomePage/Testimonial.astro';
import { BASE_URL } from '~/utils/apliInstance';

/* ================= META ================= */

const metadata = {
  title: 'Safe Stairlift Services for Your Home',
  description:
    'Expert home stairlift services focused on safety, comfort, and reliable support.',
  openGraph: {
    images: [
      {
        url: 'https://64ps06tv-8055.inc1.devtunnels.ms/assets/88503ead-0032-4a58-8ed5-5592f5531ad8',
        alt: 'About Us Image',
      },
    ],
  },
};

/* ================= FALLBACK DATA ================= */

const fallbackData = {
  hero_section: {
    Title: "Safe Stairlift Services for Your Home",
    sub_title: "Expert stairlift services designed around your home and your needs.",
    hero_image: null,
  },

  About_section: {
    title: "About us",
    about_us_description:
      "<p>We visit your home to assess your staircase and understand your mobility needs before recommending the right solution.</p>",
    about_image: "42ff17f4-a1d5-4f49-bb21-1ef143b1580c",
  },

  our_service_home: {
    title: "What do we do ?",
    slug: "home-stairlift-assessment",
    services: [
      {
        service_name_: "Home Stairlift Assessment",
        service_description:
          "We visit your home to assess your staircase and understand your mobility needs before recommending the right solution.",
        icon: "home_work",
      },
      {
        service_name_: "Stairlift Consultation",
        service_description:
          "Our experts guide you through suitable stairlift options and explain the best approach for your home.",
        icon: "accessible",
      },
      {
        service_name_: "Professional Stairlift Installation",
        service_description:
          "Our experts install your stairlift safely and efficiently with minimal disruption.",
        icon: "stairs",
      },
      {
        service_name_: "Safety Checks & User Guidance",
        service_description:
          "We perform thorough safety checks and show you how to use the stairlift with confidence.",
        icon: "safety_check",
      },
    ],
  },

  whyusection: {
    title: "Why Us?",
    sections: [
      {
        title: "Expert Home Assessment",
        descriptions:
          "We carefully assess your staircase and mobility needs to recommend the safest and most suitable solution.",
        icon: "home",
      },
      {
        title: "Professional Installation",
        descriptions:
          "Our trained technicians ensure proper installation with full safety checks and attention to detail.",
        icon: "settings_photo_camera",
      },
      {
        title: "Safety & Comfort First",
        descriptions:
          "Every service is focused on user safety, comfort, and ease of use within your home.",
        icon: "safety_check",
      },
      {
        title: "Reliable After-Sales Support",
        descriptions:
          "We continue to support you even after installation, offering reliable maintenance and assistance whenever you need it.",
        icon: "headphones",
      },
      {
        title: "Honest & Transparent Guidance",
        descriptions:
          "We offer clear advice with no pressureâ€”helping you make informed decisions with confidence.",
        icon: "handshake",
      },
    ],
  },

  reviewsection: {
    heading_title: "Customer Review",
    review_sections: [
      {
        author: "James W.",
        comments:
          "The entire process was handled very professionally. The team explained everything clearly and completed the installation smoothly and on time.",
      },
      {
        author: "James W.",
        comments:
          "The entire process was handled very professionally. The team explained everything clearly and completed the installation smoothly and on time.",
      },
      {
        author: "James W.",
        comments:
          "The entire process was handled very professionally. The team explained everything clearly and completed the installation smoothly and on time.",
      },
    ],
  },
};

/* ================= API + FALLBACK ================= */

let pageData = fallbackData;

try {
  const res = await fetch(
    `${BASE_URL}/items/HomePage?fields=*,hero_section.*,About_section.*,our_service_home.*,seo_details.*,whyusection.*,reviewsection.*`
  );

  if (res.ok) {
    const apiData = await res.json();
    pageData = apiData?.data?.[0] ?? fallbackData;
  }
} catch (error) {
  console.warn('Directus API failed, using fallback data');
}
console.log("fall", pageData)
---


<Layout metadata={metadata}>
  <!-- Hero Section -->
  <HeroSection heroData={pageData.hero_section} />

  <!-- Our Services -->
  <OurServices ourServiceData={pageData.our_service_home} />

  <!-- About -->
  <AboutSection aboutusdata={pageData.About_section} />

  <!-- Why Us -->
  <WhyusSection whyusdata={pageData.whyusection} />

  <!-- Testimonials -->
  <Testimonial reviewsData={pageData.reviewsection} />

  <!-- Contact -->
  <ConactSection />
</Layout>

